## Class Hierarchy in Unreal

- Object - base class for all object in Unreal

e.g. Camera

☝️

- Actor - anything that is placed/spawned in the world

e.g. Wall, Weapon

☝️

- Pawn - actors that can <ins>receive inputs</ins> from players or AIs

e.g. Flying vehicle

☝️

 - Character - pawn of which Unreal implements walking movement

e.g. player

<br>

... We can create *New C++ Class* from the UE editor which derives from the above classes.

Notes:

- We need to ensure that the macro `GENERATED_BODY()` generated by Unreal Engine is <ins>in the first line</ins> of such a class.

- Classes derived from `Actor` has a method `BeginPlay()` which is called whenever the actor is spawned.

## Class Prefixes

Unreal expects classes to be prefixed consistently.

- U - Classes directly deriving from UObject
- A - Classes directly deriving from Actor
- F - Structs
- E - Enums
- I - Interfaces

## Character

- To start with a Character we created in a level, set its `Auto Possess Player` to `Player0`.

### Camera and Arm

- The camera attaching to the player Character and the arm that can be used to link between the player Character and the camera (to make a 3rd-person view) can be represented as `protected` data members (in the player Character class) of type `UCameraComponent` and `USpringArmComponent` respectively.

- A nice property of `USpringArmComponent` is that collision detection is applied to automatically adjust the length of the arm so that there's never obstacles in between what are linked by the spring arm.

- `UCameraComponent` and `USpringArmComponent` have method called `SetupAttachment()` which can attach the component to what is passed to this method (e.g. `CameraComp->SetupAttachment(RootComponent);` where `CameraComp` is an `UCameraComponent` and `RootComponent` is a data member in Actor represent the root of the attachment hierarchy (e.g. the collision volume of the Actor) for the Actor).

- Components of a Charactor (e.g. `UCameraComponent` and `USpringArmComponent`) can be instantiated from the function `CreateDefaultSubobject<SubobjectType>(string)`. This function can only be used inside constructor. Note that the `string` we pass to this function will be the name of the component shown in the Unreal editor.

- Unreal property system contains all those macros in unreal engine that start with `U`.

  For example, `UPROPERTY(VisibleAnywhere)`, where `VisibleAnywhere` is a specifier, exposes the component follows it to unreal editor & Blueprints.

### Bind key (input) to function

- In a Character class there is a method called `void SetupPlayerInputComponent(UInputComponent* PlayerInputComponent)` which is used to bind functions to inputs (e.g. key press).

  - To bind key for character movement: inside the function, we can call the `UInputComponent`'s method `BindAxis()`. For example, `PlayerInputComponent->BindAxis("MoveForward", this, &ASCharacter::MoveForward)`. `"MoveForward"` is the name to refer to when we actually do the key binding in the editor, `this` is the point to the object which <ins>owns this input</ins>, `&ASCharacter::MoveForward` is the pointer to the function that should be called when receiving this input.
  
    The movement method `&ASCharacter::MoveForward` required by the `BindAxis()` method takes one `float` (let's name it `value`). To implement `&ASCharacter::MoveForward`, since our class is a Character, we are able to call the `AddMovementInput(GetActorForwardVector(), value)` method (which does what it says) inside `&ASCharacter::MoveForward`.
    
    To actually do the key binding in the editor, go to `Edit` -> `Project Settings` -> `Engine` -> `Input` -> `Bindings` -> `Axis Mappings`. Enter the name `"MoveForward"` we pass to the `BindAxis()` method earlier. Then, choose the input to bind with, and the `Scale` value we entered to its right is the `float` passed as `value` in `&ASCharacter::MoveForward` method. Note that we can bind multiple inputs to the same function (and perhaps each given a different `value`).
    
  - To bind key for Yaw movement, we can instead call `PlayerInputComponent->BindAxis("Turn", this, &APawn::AddControllerYawInput);` in `ASCharacter::SetupPlayerInputComponent` method. Then, go to `Edit - Project Setting - Engine - Input - Bindings - Axis Mappings`, add a new mapping and name it as `"Turn"` (as in `BindAxis("Turn", ...`) and assign it to `Mouse X` (this represents the Left-Right movement of your mouse).

### Character animation

- Inside your Character Blueprint class (Open with Full Blueprint Editor), the *Details* of the *Mesh* component has a section called *Mesh* where <ins>Skeletal Mesh Asset</ins> can be selected (the asset files should be copied to the <ins>Content</ins> folder under the project menu). Plus, we can select an <ins>Anim Class</ins> in the section called *Animation* for our Character.
